<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Turbofan RUL Predictor - Engine Health Monitoring</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
      }

      .header {
        background: white;
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      .header h1 {
        color: #667eea;
        font-size: 2.5em;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .header h1::before {
        content: "‚úàÔ∏è";
        font-size: 1.2em;
      }

      .header p {
        color: #666;
        font-size: 1.1em;
        line-height: 1.6;
      }

      .info-section {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      .info-section h2 {
        color: #764ba2;
        margin-bottom: 15px;
        font-size: 1.5em;
      }

      .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 15px;
        margin-top: 15px;
      }

      .info-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .info-card h3 {
        font-size: 1.2em;
        margin-bottom: 10px;
      }

      .info-card p {
        font-size: 0.95em;
        opacity: 0.95;
      }

      .main-content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
      }

      .input-panel,
      .result-panel {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      .input-panel h2,
      .result-panel h2 {
        color: #667eea;
        margin-bottom: 25px;
        font-size: 1.8em;
        border-bottom: 3px solid #667eea;
        padding-bottom: 10px;
      }

      .sensor-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
        margin-bottom: 25px;
      }

      .sensor-input {
        display: flex;
        flex-direction: column;
      }

      .sensor-input label {
        color: #333;
        font-weight: 600;
        margin-bottom: 8px;
        font-size: 0.95em;
      }

      .sensor-input input {
        padding: 12px;
        border: 2px solid #ddd;
        border-radius: 8px;
        font-size: 1em;
        transition: all 0.3s;
      }

      .sensor-input input:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }

      .button-group {
        display: flex;
        gap: 15px;
        margin-top: 25px;
      }

      button {
        flex: 1;
        padding: 15px 30px;
        font-size: 1.1em;
        font-weight: 600;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .predict-btn {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
      }

      .predict-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 7px 20px rgba(0, 0, 0, 0.2);
      }

      .predict-btn:disabled {
        background: #ccc;
        cursor: not-allowed;
        transform: none;
      }

      .example-btn {
        background: #f0f0f0;
        color: #333;
      }

      .example-btn:hover {
        background: #e0e0e0;
      }

      .result-card {
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        border-radius: 12px;
        padding: 25px;
        margin-bottom: 20px;
      }

      .rul-display {
        text-align: center;
        padding: 30px;
        background: white;
        border-radius: 12px;
        margin-bottom: 25px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .rul-value {
        font-size: 4em;
        font-weight: bold;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin: 10px 0;
      }

      .rul-label {
        font-size: 1.2em;
        color: #666;
        margin-top: 10px;
      }

      .status-indicator {
        display: inline-block;
        padding: 8px 20px;
        border-radius: 20px;
        font-weight: 600;
        margin: 10px 0;
      }

      .status-excellent {
        background: #4caf50;
        color: white;
      }
      .status-good {
        background: #8bc34a;
        color: white;
      }
      .status-fair {
        background: #ffc107;
        color: #333;
      }
      .status-poor {
        background: #ff9800;
        color: white;
      }
      .status-critical {
        background: #f44336;
        color: white;
      }

      .risk-indicator {
        display: flex;
        align-items: center;
        gap: 10px;
        margin: 15px 0;
        padding: 15px;
        background: white;
        border-radius: 8px;
      }

      .risk-bar {
        flex: 1;
        height: 30px;
        background: #e0e0e0;
        border-radius: 15px;
        overflow: hidden;
        position: relative;
      }

      .risk-fill {
        height: 100%;
        transition: width 0.5s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 600;
      }

      .recommendation {
        background: white;
        padding: 20px;
        border-radius: 8px;
        border-left: 4px solid #667eea;
        margin-top: 15px;
      }

      .recommendation h4 {
        color: #667eea;
        margin-bottom: 10px;
        font-size: 1.1em;
      }

      .loading {
        display: none;
        text-align: center;
        padding: 20px;
      }

      .loading.active {
        display: block;
      }

      .spinner {
        border: 4px solid #f3f3f3;
        border-top: 4px solid #667eea;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        animation: spin 1s linear infinite;
        margin: 0 auto;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .error-message {
        background: #ffebee;
        color: #c62828;
        padding: 15px;
        border-radius: 8px;
        margin-top: 15px;
        display: none;
      }

      .error-message.active {
        display: block;
      }

      @media (max-width: 1024px) {
        .main-content {
          grid-template-columns: 1fr;
        }

        .sensor-grid {
          grid-template-columns: 1fr;
        }
      }

      .footer {
        text-align: center;
        color: white;
        margin-top: 30px;
        padding: 20px;
        font-size: 0.9em;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>Turbofan Engine RUL Predictor</h1>
        <p>
          <strong>Remaining Useful Life (RUL) Prediction System</strong> for
          aircraft turbofan engines. This AI-powered tool uses advanced Machine
          Learning to analyze real-time sensor data and predict when maintenance
          is needed, helping prevent failures and optimize maintenance
          schedules.
        </p>
      </div>

      <div class="info-section">
        <h2>üìä About This Project</h2>
        <div class="info-grid">
          <div class="info-card">
            <h3>üéØ Purpose</h3>
            <p>
              Predict engine failure before it happens using NASA's C-MAPSS
              turbofan degradation dataset
            </p>
          </div>
          <div class="info-card">
            <h3>ü§ñ AI Model</h3>
            <p>
              Neural Network (3-layer MLP) trained on 20,000+ engine cycles with
              RMSE ~20-25 cycles
            </p>
          </div>
          <div class="info-card">
            <h3>üì° Sensor Data</h3>
            <p>
              14 critical sensors monitoring temperature, pressure, speed, and
              other vital parameters
            </p>
          </div>
          <div class="info-card">
            <h3>‚öôÔ∏è Applications</h3>
            <p>
              Predictive maintenance, fleet management, safety optimization,
              cost reduction
            </p>
          </div>
        </div>
      </div>

      <div class="main-content">
        <div class="input-panel">
          <h2>üîß Sensor Inputs</h2>
          <p style="color: #666; margin-bottom: 20px">
            Enter sensor readings or load example data
          </p>

          <div class="sensor-grid">
            <div class="sensor-input">
              <label for="s_2">Sensor 2 (Total Temperature)</label>
              <input
                type="number"
                id="s_2"
                step="0.01"
                placeholder="e.g., 641.82"
              />
            </div>
            <div class="sensor-input">
              <label for="s_3">Sensor 3 (Total Pressure)</label>
              <input
                type="number"
                id="s_3"
                step="0.01"
                placeholder="e.g., 1589.7"
              />
            </div>
            <div class="sensor-input">
              <label for="s_4">Sensor 4 (Temperature)</label>
              <input
                type="number"
                id="s_4"
                step="0.01"
                placeholder="e.g., 1400.6"
              />
            </div>
            <div class="sensor-input">
              <label for="s_7">Sensor 7 (Pressure)</label>
              <input
                type="number"
                id="s_7"
                step="0.01"
                placeholder="e.g., 554.36"
              />
            </div>
            <div class="sensor-input">
              <label for="s_8">Sensor 8 (Temperature)</label>
              <input
                type="number"
                id="s_8"
                step="0.01"
                placeholder="e.g., 2388.06"
              />
            </div>
            <div class="sensor-input">
              <label for="s_9">Sensor 9 (Pressure)</label>
              <input
                type="number"
                id="s_9"
                step="0.01"
                placeholder="e.g., 9046.19"
              />
            </div>
            <div class="sensor-input">
              <label for="s_11">Sensor 11 (Speed)</label>
              <input
                type="number"
                id="s_11"
                step="0.01"
                placeholder="e.g., 47.47"
              />
            </div>
            <div class="sensor-input">
              <label for="s_12">Sensor 12 (Temperature)</label>
              <input
                type="number"
                id="s_12"
                step="0.01"
                placeholder="e.g., 521.66"
              />
            </div>
            <div class="sensor-input">
              <label for="s_13">Sensor 13 (Temperature)</label>
              <input
                type="number"
                id="s_13"
                step="0.01"
                placeholder="e.g., 2388.02"
              />
            </div>
            <div class="sensor-input">
              <label for="s_14">Sensor 14 (Pressure)</label>
              <input
                type="number"
                id="s_14"
                step="0.01"
                placeholder="e.g., 8138.62"
              />
            </div>
            <div class="sensor-input">
              <label for="s_15">Sensor 15 (Ratio)</label>
              <input
                type="number"
                id="s_15"
                step="0.01"
                placeholder="e.g., 8.4195"
              />
            </div>
            <div class="sensor-input">
              <label for="s_17">Sensor 17 (Pressure)</label>
              <input
                type="number"
                id="s_17"
                step="0.01"
                placeholder="e.g., 392"
              />
            </div>
            <div class="sensor-input">
              <label for="s_20">Sensor 20 (Ratio)</label>
              <input
                type="number"
                id="s_20"
                step="0.01"
                placeholder="e.g., 39.06"
              />
            </div>
            <div class="sensor-input">
              <label for="s_21">Sensor 21 (Ratio)</label>
              <input
                type="number"
                id="s_21"
                step="0.01"
                placeholder="e.g., 23.419"
              />
            </div>
          </div>

          <div class="button-group">
            <button class="example-btn" onclick="loadExampleData('healthy')">
              üìä Healthy Engine
            </button>
            <button class="example-btn" onclick="loadExampleData('degraded')">
              ‚ö†Ô∏è Degraded Engine
            </button>
          </div>

          <div class="button-group">
            <button class="predict-btn" onclick="predictRUL()" id="predictBtn">
              üöÄ Predict RUL
            </button>
          </div>

          <div class="error-message" id="errorMessage"></div>
        </div>

        <div class="result-panel">
          <h2>üìà Prediction Results</h2>

          <div id="loadingIndicator" class="loading">
            <div class="spinner"></div>
            <p style="margin-top: 15px; color: #666">
              Analyzing sensor data...
            </p>
          </div>

          <div id="resultsContent" style="display: none">
            <div class="rul-display">
              <div style="color: #666; font-size: 1.1em">
                Remaining Useful Life
              </div>
              <div class="rul-value" id="rulValue">--</div>
              <div class="rul-label">Operating Cycles Remaining</div>
            </div>

            <div class="result-card">
              <h3 style="color: #667eea; margin-bottom: 15px">
                üè• Health Status
              </h3>
              <div style="text-align: center">
                <span class="status-indicator" id="healthStatus">Unknown</span>
              </div>
              <div style="margin-top: 10px; text-align: center; color: #666">
                Confidence: <strong id="confidenceLevel">--</strong>
              </div>
            </div>

            <div class="result-card">
              <h3 style="color: #667eea; margin-bottom: 15px">
                ‚ö†Ô∏è Risk Assessment
              </h3>
              <div class="risk-indicator">
                <span style="font-weight: 600; min-width: 80px" id="riskLabel"
                  >Risk:</span
                >
                <div class="risk-bar">
                  <div class="risk-fill" id="riskFill" style="width: 0%">
                    0%
                  </div>
                </div>
              </div>
            </div>

            <div class="recommendation">
              <h4>üîß Maintenance Recommendation</h4>
              <p id="maintenanceRec">Awaiting prediction...</p>
            </div>
          </div>

          <div
            id="initialMessage"
            style="text-align: center; padding: 50px 20px; color: #999"
          >
            <div style="font-size: 4em; margin-bottom: 20px">üéØ</div>
            <p style="font-size: 1.2em">
              Enter sensor data and click "Predict RUL" to get started
            </p>
          </div>
        </div>
      </div>

      <div class="footer">
        <p>
          üöÄ Powered by Neural Network AI | üìä Trained on NASA C-MAPSS Dataset |
          ‚ö° FastAPI Backend | üé® Modern Web Interface
        </p>
        <p style="margin-top: 10px; opacity: 0.8">
          Built for predictive maintenance and engine health monitoring
        </p>
      </div>
    </div>

    <script>
      const sensorIds = [
        "s_2",
        "s_3",
        "s_4",
        "s_7",
        "s_8",
        "s_9",
        "s_11",
        "s_12",
        "s_13",
        "s_14",
        "s_15",
        "s_17",
        "s_20",
        "s_21",
      ];

      const exampleData = {
        healthy: {
          s_2: 641.82,
          s_3: 1589.7,
          s_4: 1400.6,
          s_7: 554.36,
          s_8: 2388.06,
          s_9: 9046.19,
          s_11: 47.47,
          s_12: 521.66,
          s_13: 2388.02,
          s_14: 8138.62,
          s_15: 8.4195,
          s_17: 392,
          s_20: 39.06,
          s_21: 23.419,
        },
        degraded: {
          s_2: 643.0,
          s_3: 1595.0,
          s_4: 1415.0,
          s_7: 556.0,
          s_8: 2390.0,
          s_9: 9055.0,
          s_11: 48.0,
          s_12: 525.0,
          s_13: 2395.0,
          s_14: 8145.0,
          s_15: 8.6,
          s_17: 398,
          s_20: 40.0,
          s_21: 24.0,
        },
      };

      function loadExampleData(type) {
        const data = exampleData[type];
        sensorIds.forEach((id) => {
          document.getElementById(id).value = data[id];
        });
      }

      async function predictRUL() {
        // Collect sensor data
        const sensorData = {};
        let allFilled = true;

        sensorIds.forEach((id) => {
          const value = document.getElementById(id).value;
          if (!value) {
            allFilled = false;
          } else {
            sensorData[id] = parseFloat(value);
          }
        });

        if (!allFilled) {
          showError("Please fill in all sensor readings");
          return;
        }

        // Show loading
        document.getElementById("loadingIndicator").classList.add("active");
        document.getElementById("resultsContent").style.display = "none";
        document.getElementById("initialMessage").style.display = "none";
        document.getElementById("errorMessage").classList.remove("active");
        document.getElementById("predictBtn").disabled = true;

        try {
          const response = await fetch("/predict", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(sensorData),
          });

          if (!response.ok) {
            throw new Error("Prediction failed");
          }

          const result = await response.json();
          displayResults(result);
        } catch (error) {
          showError(
            "Error making prediction. Please check your inputs and try again."
          );
          document.getElementById("initialMessage").style.display = "block";
        } finally {
          document
            .getElementById("loadingIndicator")
            .classList.remove("active");
          document.getElementById("predictBtn").disabled = false;
        }
      }

      function displayResults(result) {
        document.getElementById("resultsContent").style.display = "block";

        // Display RUL
        document.getElementById("rulValue").textContent = Math.round(
          result.rul_prediction
        );

        // Display health status
        const healthStatus = document.getElementById("healthStatus");
        healthStatus.textContent = result.health_status;
        healthStatus.className =
          "status-indicator status-" + result.health_status.toLowerCase();

        // Display confidence
        document.getElementById("confidenceLevel").textContent =
          result.confidence_level;

        // Display risk
        const riskLevel = result.risk_level;
        document.getElementById("riskLabel").textContent = riskLevel;

        const riskFill = document.getElementById("riskFill");
        let riskPercent = 0;
        let riskColor = "#4CAF50";

        if (riskLevel.includes("Very High")) {
          riskPercent = 95;
          riskColor = "#F44336";
        } else if (riskLevel.includes("High")) {
          riskPercent = 75;
          riskColor = "#FF9800";
        } else if (riskLevel.includes("Medium")) {
          riskPercent = 50;
          riskColor = "#FFC107";
        } else if (riskLevel.includes("Low-Medium")) {
          riskPercent = 30;
          riskColor = "#8BC34A";
        } else {
          riskPercent = 15;
          riskColor = "#4CAF50";
        }

        riskFill.style.width = riskPercent + "%";
        riskFill.style.background = riskColor;
        riskFill.textContent = riskLevel;

        // Display recommendation
        document.getElementById("maintenanceRec").textContent =
          result.maintenance_recommendation;
      }

      function showError(message) {
        const errorDiv = document.getElementById("errorMessage");
        errorDiv.textContent = message;
        errorDiv.classList.add("active");
      }

      // Allow Enter key to trigger prediction
      document.addEventListener("keypress", function (e) {
        if (e.key === "Enter") {
          predictRUL();
        }
      });
    </script>
  </body>
</html>
